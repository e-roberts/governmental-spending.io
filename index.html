<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Government Spending Analysis</title>
        <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v5.15.1/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=1024, initial-scale=1.0">
        
            <!-- Data: Country Selection Map -->
            <script src="https://www.gstatic.com/charts/loader.js"></script>
            
            <!-- Google Visualization Charts-->
            <script>
                 google.charts.load('current', {'packages':['corechart', 'geochart'],
                'mapsApiKey': 'AIzaSyD51kMFDNPRa9X44IOOnt7qT2aLAy6SGBo'});
                google.charts.setOnLoadCallback(drawAllSheets); 
                function drawAllSheets() {
                    drawSheetName('GDP', 'SELECT A', CountriesResponseHandler)
                    drawSheetName('Health', 'SELECT B,C,D,E,F,G', HealthResponseHandler);
                    drawSheetName('Education', 'SELECT B,C,D,E,F,G', EduResponseHandler);
                    drawSheetName('Military', 'SELECT B,C,D,E,F,G', MilResponseHandler);
                    drawSheetName('HealthPercentGDP', 'SELECT A,B,C,D,E,F,G,H,I,J,K', HealthPercentGDPResponseHandler);
                    drawSheetName('EducationPercGDP', 'SELECT A,B,C,D,E,F,G,H,I,J,K', EduPercentGDPResponseHandler);
                    drawSheetName('MilitaryPercGDP', 'SELECT A,B,C,D,E,F,G,H,I,J,K', MilPercentGDPResponseHandler);
                    drawSheetName('HealthPerCap15', 'SELECT A,B,C', HealthPerCap15RH);
                    drawSheetName('HealthPerCap16', 'SELECT A,B,C', HealthPerCap16RH);          
                } ///drawAllSheets
                
                function drawSheetName(sheetName, query, responseHandler){
                    var queryString = encodeURIComponent(query);
                    var query = new google.visualization.Query(
                        'https://docs.google.com/spreadsheets/d/11fINxyUR_8jFfbWUAsUOIP3AmcPm62pH/gviz/tq?sheet=' + sheetName + '&headers=1&tq=' + queryString);
                        
                    query.send(responseHandler);
                } //drawSheetName

                //Error Handler:
                function checkError(response){
                    if(response.isError()) {
                        alert('Error in query; ' + response.getMessage() + ' ' + response.getDetailedMessage());
                        return;
                    }
                }//checkError                
                
                //Selected Countries Map in Data:
                function CountriesResponseHandler(response){
                    checkError(response);
                    var data = response.getDataTable();
                    data.sort({column: 0, desc: true});

                    var options = {defaultColor: '#fed136'};
                    var chart = new google.visualization.GeoChart(document.getElementById('countries_div'));
                    chart.draw(data, options);
                } //CountriesResponseHandler


                //Healthcare Expenditure Overall:
                function HealthResponseHandler(response){
                    checkError(response);
                    var data = response.getDataTable();
                    data.sort({column: 1, desc: true});

                    var options = {
                        title: 'Healthcare Expenditure by Country in Billions (Current USD)',
                        titleTextStyle: {fontSize: 18},
                        vAxis: {title: 'Current Healthcare Expenditure in Billions (current USD)', format: 'currency'},
                        hAxis: {title: 'Country'},
                };

                    var chart = new google.visualization.ColumnChart(document.getElementById('health_div'));
                    chart.draw(data, options);
                } //HealthResponseHandler

                //Education Expenditure Overall:
                function EduResponseHandler(response){
                    checkError(response);
                    var data = response.getDataTable();
                    data.sort({column: 0, desc: true});

                    var options = {
                        title: 'Education Expenditure by Country in Millions (Current USD)',
                        titleTextStyle: {fontSize: 18},
                        vAxis: {title: 'Current Education Expenditure in Millions (current USD)', format: 'currency'},
                        hAxis: {title: 'Country'},
                };

                    var chart = new google.visualization.ColumnChart(document.getElementById('edu_div'));
                    chart.draw(data, options);
                } //EduResponseHandler
                
                //Military Expenditure Overall:
                function MilResponseHandler(response){
                    checkError(response);
                    var data = response.getDataTable();
                    data.sort({column: 0, desc: true});

                    var options = {
                        title: 'Military Expenditure by Country in Billions (Current USD)',
                        titleTextStyle: {fontSize: 18},
                        vAxis: {title: 'Current Education Expenditure in Billions (current USD)', format: 'currency'},
                        hAxis: {title: 'Country'},
                };

                    var chart = new google.visualization.ColumnChart(document.getElementById('mil_div'));
                    chart.draw(data, options);
                } //MilResponseHandler

                //Healthcare Expenditure as a % of GDP:
                function HealthPercentGDPResponseHandler(response){
                    checkError(response);
                    var data = response.getDataTable();
                    data.sort({column: 0, desc: true});

                    var options = {
                        title: 'Healthcare Expenditure as a Percent of GDP by Country',
                        titleTextStyle: {fontSize: 18},
                        vAxis: {title: 'Percent of GDP Spent on Healthcare', format: 'percent'},
                        hAxis: {title: 'Year', format: '####'},
                    };

                    var chart = new google.visualization.LineChart(document.getElementById('health_gdp_div'));
                    chart.draw(data, options);

                };//HealthPercentGDPResponseHandler

                //Education Expenditure as a % of GDP:
                function EduPercentGDPResponseHandler(response){
                    checkError(response);
                    var data = response.getDataTable();
                    data.sort({column: 0, desc: true});

                    var options = {
                        title: 'Education Expenditure as a Percent of GDP by Country',
                        titleTextStyle: {fontSize: 18},
                        vAxis: {title: 'Percent of GDP Spent on Education', format: 'percent'},
                        hAxis: {title: 'Year', format: '####'},
                    };

                    var chart = new google.visualization.LineChart(document.getElementById('edu_gdp_div'));
                    chart.draw(data, options);

                };//EduPercentGDPResponseHandler

                //Military Expenditure as a % of GDP:
                function MilPercentGDPResponseHandler(response){
                    checkError(response);
                    var data = response.getDataTable();
                    data.sort({column: 0, desc: true});

                    var options = {
                        title: 'Military Expenditure as a Percent of GDP by Country',
                        titleTextStyle: {fontSize: 18},
                        vAxis: {title: 'Percent of GDP Spent on the Military', format: 'percent'},
                        hAxis: {title: 'Year', format: '####'},
                    };

                    var chart = new google.visualization.LineChart(document.getElementById('mil_gdp_div'));
                    chart.draw(data, options);

                };//MilPercentGDPResponseHandler


                //Healthcare Expenditure Per Capita vs. GDP Per Capita 2015:
                /*
                function change(){
                    var listbox = document.getElementById("health_per_cap");
                    var selIndex = listbox.selectedIndex;
                    var selValue = listbox.options[selIndex].value;
                    var selText = listbox.options[selIndex].text;
                    console.log(selValue);
                    google.charts.setOnLoadCallback(drawChart);
                    */
                    function HealthPerCap15RH(response){
                        checkError(response);
                        var data15 = response.getDataTable();
                        data15.sort({column: 0, desc: true});

                        var options15 = {
                            title: '2015 Healthcare Expenditure Per Capita vs. 2015 GDP Per Capita',
                            titleTextStyle: {fontSize: 18},
                            vAxis: {title: 'Healthcare Expenditure Per Capita', format: '$#,###'},
                            hAxis: {title: 'GDP Per Capita', format: '$#,###'},
                        };

                        var chart = new google.visualization.ScatterChart(document.getElementById('health_percap_gdp_15_div'));
                        chart.draw(data15, options15);

                    };//HealthPerCap15RH

                    //Healthcare Expenditure Per Capita vs. GDP Per Capita 2016:
                    function HealthPerCap16RH(response){
                        checkError(response);
                        var data16 = response.getDataTable();
                        data16.sort({column: 0, desc: true});

                        var options16 = {
                            title: '2016 Healthcare Expenditure Per Capita vs. 2016 GDP Per Capita',
                            titleTextStyle: {fontSize: 18},
                            vAxis: {title: 'Healthcare Expenditure Per Capita', format: '$#,###'},
                            hAxis: {title: 'GDP Per Capita', format: '$#,###'},
                        };

                        var chart = new google.visualization.ScatterChart(document.getElementById('health_percap_gdp_16_div'));
                        chart.draw(data16, options16);

                };//HealthPerCap15RH
            </script>
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
            <div class="container">
                <a class="navbar-brand js-scroll-trigger" href="#page-top">Governmental Spending Analysis</a>
                <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    Menu
                    <i class="fas fa-bars ml-1"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav text-uppercase ml-auto">
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#data">Data</a></li>
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#health">Health</a></li>
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#education">Education</a></li>
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#military">Military</a></li>
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#analysis">Analysis</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Masthead-->
        <header class="masthead">
            <div class="container">
                <div class="masthead-subheading">Analysis of the Top 10 Countries of the G20</div>
                <div class="masthead-heading text-uppercase">Health, Education, and Military Spending</div>
                <a class="btn btn-primary btn-xl text-uppercase js-scroll-trigger" href="#data">Show Me More</a>
            </div>
        </header>
        <!-- Data -->
        <section class="page-section" id="data">
            <div class="container">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase">Data</h2>
                    <h3 class="section-subheading text-muted">Full dataset used for this analysis can be accessed 
                        <a href="https://drive.google.com/file/d/11fINxyUR_8jFfbWUAsUOIP3AmcPm62pH/view?usp=sharing">here.</a>
                    </h3>
                </div>
                <div class="row text-center">
                    <div class="col-md-4">
                        <span class="fa-stack fa-4x">
                            <i class="fas fa-circle fa-stack-2x text-primary"></i>
                            <i class="fas fa-medkit fa-stack-1x fa-inverse"></i>
                        </span>
                        <h4 class="my-3">Healthcare Spending</h4>
                        <p class="text-muted">Data on healthcare spending, as well as Gross Domestic Product (GDP) data, were sourced from <a href="https://data.worldbank.org/indicator/SH.XPD.CHEX.PP.CD">The World Bank.</a> </p>
                        <br>
                        <p class="text-muted"><i>Note: </i>  Data for the year 2019 was unavailable, therefore it was calculated by taking the average change in spending year over year from 2014 - 2018 
                            and adding it to the spending from 2018.</p>
                    </div>
                    <div class="col-md-4">
                        <span class="fa-stack fa-4x">
                            <i class="fas fa-circle fa-stack-2x text-primary"></i>
                            <i class="fas fa-graduation-cap fa-stack-1x fa-inverse"></i>
                        </span>
                        <h4 class="my-3">Education Spending</h4>
                        <p class="text-muted">Data from education spending was sourced from The United Nations Educational, Scientific and Cultural Organization
                            <a href="http://data.uis.unesco.org/">(UNESCO).</a> 
                        </p>
                        <br>
                        <p class="text-muted"> <i>Note: </i>  Educational spending data was not available for Canada, China, and Saudi Arabia. Years with missing data 
                            were calculated by taking the average change in spending year over year from 2011 - 2017 and adding it to the total spending from the 
                            previous year.</p>
                    </div>
                    <div class="col-md-4">
                        <span class="fa-stack fa-4x">
                            <i class="fas fa-circle fa-stack-2x text-primary"></i>
                            <i class="fas fa-globe fa-stack-1x fa-inverse"></i>
                        </span>
                        <h4 class="my-3">Military Spending</h4>
                        <p class="text-muted">Data from military spending was sourced from the Stockholm International Peace Research Institute <a href="https://www.sipri.org/databases/milex">(SIPRI).</a></p>
                    </div>
                </div>
                <br>
                <div class="text-center">
                    <h3 class="section-heading">Countries in the G20 Selected for Analysis</h3>
                </div>
                <br>
                <div class="text-center" id="countries_div" style="width: 900px; height: 500px;"></div>
                <br>

            </div>
        </section>
        <!-- Health Spending-->
        <section class="page-section bg-light" id="health">
            <div class="container">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase">Healthcare Spending</h2>
                    <h3 class="section-subheading text-muted"> <a href="https://sdgs.un.org/goals">UN Sustainable Development Goal 3</a> is to "ensure healthy lives and promote
                        well-being for all at all ages." Healthcare spending is more critical now than ever before, given the global 
                        pandemic. With this goal in mind, the data visualizations below explores healthcare spending of our 10 selected 
                        countries in the G20 from 2015 to 2019. 
                    </h3>
                </div>
                <br>
                <div class="text-center" id="health_div" style="width: 900px; height: 500px;"></div>
                <br>
                <br>
                <br>
                <div class="text-center" id="health_gdp_div" style="width: 900px; height: 500px;"></div>
                <br>
                <br>
                <br>
                <div class="text-center" id="health_percap_gdp_15_div" style="width: 900px; height: 500px;"></div>
                <br>
                <br>
                <br>
                <div class="text-center" id="health_percap_gdp_16_div" style="width: 900px; height: 500px;"></div>
        <!-- Education Spending -->
        <section class="page-section" id="education">
            <div class="container">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase">Education Spending</h2>
                    <h3 class="section-subheading text-muted"><a href="https://sdgs.un.org/goals">UN Sustainable Development Goal 4</a> is to
                        "ensure inclusive and equitable quality education and promote lifelong learning opportunities for all." With this goal
                        in mind, we will analyze education spending for our selected G20 countries from 2015 to 2019. As previously mentioned
                        above, no recent data was available for Canada, China, or Saudi Arabia.
                    </h3>
                </div>
                <br>
                <div class="text-center" id="edu_div" style="width: 900px; height: 500px;"></div>
                <br>
                <br>
                <br>
                <div class="text-center" id="edu_gdp_div" style="width: 900px; height: 500px;"></div>
            </div>
        </section>
        <!-- Military Spending -->
        <section class="page-section bg-light" id="military">
            <div class="container">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase">Military Spending</h2>
                    <h3 class="section-subheading text-muted"><a href="https://sdgs.un.org/goals">UN Sustainable Development Goal 16</a> is to
                    "promote peaceful and inclusive societies for Sustainable Development, provide access to justice for all and build effective,
                    accountable and inclusive institutions at all levels." With the goal of peace in mind, the visualizations below examine 
                    military spending of our 10 selected countries in the G20 from 2015 to 2019.
                    </h3>
                </div>
                <br>
                <div class="text-center" id="mil_div" style="width: 900px; height: 500px;"></div>
                <br>
                <br>
                <br>
                <div class="text-center" id="mil_gdp_div" style="width: 900px; height: 500px;"></div>
                <br>
                <br>
                <br>
                <div class="row">
                    <div class="col-lg-8 mx-auto text-center"><p class="large text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aut eaque, laboriosam veritatis, quos non quis ad perspiciatis, totam corporis ea, alias ut unde.</p></div>
                </div>
            </div>
        </section>
        <!-- Comparative Analysis -->
        <section class="page-section" id="analysis">
            <div class="container">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase">Comparative Analysis</h2>
                    <h3 class="section-subheading text-muted">Comparing health, education and military spending.</h3>
                </div>
        </section>
        
        <!-- Footer-->
        <footer class="footer py-4">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-4 text-lg-left">
                        Copyright Â© Elise Roberts Scruggs <script>var d = new Date(); document.write(d.getFullYear());</script>
                    </div>
                </div>
            </div>
        </footer>

        <!-- Bootstrap core JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Third party plugin JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
